(()=>{var e;e={},tinymce.PluginManager.add("esr_mce_button",(function(t,s){jQuery.post(ajaxurl,{action:"esr_tinymce_load_settings"},(function(t){e=t})),t.addButton("esr_mce_button",{text:"Waves",icon:"icon dashicons-welcome-learn-more",classes:"esr-tinymce-button",title:"Insert School Shortcode",onclick:function(){t.windowManager.open({title:"Insert School Shortcode",classes:"bg-show-more",body:[{type:"listbox",name:"esrType",label:"Type",values:[{text:"Course registration",value:"esr_course_registration"},{text:"Wave schedule",value:"esr_wave_schedule"}]},{type:"listbox",name:"esrStyle",label:"Style",values:e.styles},{type:"listbox",name:"esrWavesIds",label:"Waves",values:e.waves},{type:"checkbox",name:"esrZoomEnabled",label:"Enable automatic zoom"},{type:"checkbox",name:"esrGroupFilterEnabled",label:"Enable group filter"},{type:"checkbox",name:"esrGroupFilterHide",label:"Hide not selected groups"},{type:"checkbox",name:"esrLevelFilterEnabled",label:"Enable level filter"},{type:"checkbox",name:"esrLevelFilterHide",label:"Hide not selected levels"},{type:"listbox",name:"esrSpecificGroup",label:"Show specific group",values:e.groups},{type:"listbox",name:"esrShowHover",label:"Show hover with limits",values:[{text:"Choose an option",value:""},{text:"Number of registrations",value:"registrations"},{text:"Places left",value:"places_left"}]}],onsubmit:function(e){let s=e.data.esrType,a=[];a.push(`type="${e.data.esrStyle}"`),a.push(`waves="${e.data.esrWavesIds}"`),e.data.esrZoomEnabled&&a.push('automatic_zoom="1"'),e.data.esrGroupFilterEnabled&&(a.push('show_group_filter="1"'),e.data.esrGroupFilterHide&&a.push('group_filter_hide_courses="1"')),e.data.esrLevelFilterEnabled&&(a.push('show_level_filter="1"'),e.data.esrLevelFilterHide&&a.push('level_filter_hide_courses="1"')),""!==e.data.esrShowHover&&a.push(`hover_option="${e.data.esrShowHover}"`),""!==e.data.esrSpecificGroup&&a.push(`filter_group="${e.data.esrSpecificGroup}"`),t.insertContent(`[${s+" "+a.join(" ")}]`)}})}})}))})();