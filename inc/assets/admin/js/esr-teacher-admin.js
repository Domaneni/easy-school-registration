jQuery((function(e){e(document).ready((function(){function t(t){t.find("input:not([type=submit]):not([type=radio])").val(""),t.find("input[type=radio].esr-default").prop("checked",!0),t.find("textarea").val(""),t.find("select").val(null),e.each(e("select option[data-default=1]",t),(function(t,a){e(a).parent().val(e(a).val())})),e.each(e("input[data-default]",t),(function(t,a){e(a).val(e(a).data("default"))}))}function a(){var a=e(".esr-edit-box");t(a),a.show()}function n(t,a){var n=e(".esr-edit-box");e.each(n.find("input:not([type=submit])"),(function(a,n){"checkbox"===e(n).attr("type")?e(n).prop("checked",t.data(e(n).data("name"))):e(n).val(t.data(e(n).data("name")))})),e.each(n.find("select"),(function(a,n){e(n).val(parseInt(t.data(e(n).data("name"))))})),a?n.find("[name=teacher_id]").val(t.data("id")):n.find("[name=teacher_id]").val("")}function s(e){return e.closest(".esr-row")}function i(){e("html, body").animate({scrollTop:e("#esr-edit-box").offset().top-25},2e3)}0!==e(".esr-question").length&&tippy(".esr-question",{interactive:!0,content:e=>e.getAttribute("title")}),0===e("body").find(".esr-hall").size()&&e("body").find(".esr-header .esr-hall-header").hide();var o=!0;e(document).on("click",".esr-row .actions button",(function(){e(this).next().is(":visible")?e(this).next().hide():(e(".esr-actions-box").hide(),e(this).next().show(),o=!1)})).on("click","body",(function(){o&&e(".esr-actions-box").hide(),o=!0})).on("click",".esr-add-new",(function(){a(),i()})).on("click",".esr-edit-box .close",(function(){var a=e(".esr-edit-box");t(a),a.hide()})).on("click",".actions.esr-teacher .esr-action.edit",(function(){a(),n(s(e(this)),!0),i()})).on("click",".actions.esr-teacher .esr-action.duplicate",(function(){a(),n(s(e(this)),!1),i()})).on("click",".actions.esr-teacher .esr-action.deactivate",(function(){var t=e(this).closest(".esr-row"),a={action:"esr_teacher_deactivate",teacher_id:t.data("id")};e.post(ajaxurl,a,(function(e){"-1"!==e&&t.addClass("passed")}))})).on("click",".actions.esr-teacher .esr-action.activate",(function(){var t=e(this).closest(".esr-row"),a={action:"esr_teacher_activate",teacher_id:t.data("id")};e.post(ajaxurl,a,(function(e){"-1"!==e&&t.removeClass("passed")}))}))}))})),jQuery((function(e){e(document).ready((function(){e(".esr-datatable:not(.esr-all-false)").length?e.each(e(".esr-datatable:not(.esr-all-false)"),(function(t,a){var n={lengthMenu:[[25,50,100,200,-1],[25,50,100,200,"All"]],pageLength:100,order:[[0,"desc"]],aoColumnDefs:[{bSortable:!1,aTargets:["no-sort"]}],dom:"lBfrtip",buttons:["colvis"],columnDefs:[{targets:"no-sort",orderable:!1}],initComplete:function(){this.api().columns().every((function(){var t=this,a=e(t.header()).hasClass("esr-multiple-filters");if(e(t.header()).data("label",e(t.header()).text()),!e(t.header()).hasClass("esr-filter-disabled")){var n=e('<select><option value="">'+e(t.header()).text()+"</option></select>").appendTo(e(t.header()).empty()).on("change",(function(){var n=e.fn.dataTable.util.escapeRegex(e(this).val());a?t.search(n?n+"+":"",!0,!1).draw():t.search(n?"^"+n+"$":"",!0,!1).draw()})),s=[];t.data().unique().sort().each((function(t){a?e.each(t.split(", "),(function(t,a){""!==a&&-1===e.inArray(a,s)&&(n.append('<option value="'+a+'">'+a+"</option>"),s.push(a))})):""!==t&&n.append('<option value="'+t+'">'+t+"</option>")}))}})),e("[data-cin-course-id]").length>0&&jQuery("th.course select option").filter((function(){return 0===jQuery(this).text().indexOf(e("[data-cin-course-id]").data("cin-course-id")+" - ")})).prop("selected",!0).trigger("change")}};e(a).hasClass("esr-email-export")&&n.buttons.push({extend:"copyHtml5",text:"Copy Emails",title:"",header:!1,exportOptions:{columns:[".esr-student-email:visible:not(.esr-hide-print)"],customizeData:function(t){var a=[],n=[];e.each(t.body,(function(t,s){-1===e.inArray(s[0],n)&&(a.push(s),n.push(s[0]))})),t.body=a}}}),e(a).hasClass("esr-newsletter-email-export")&&n.buttons.push({extend:"copyHtml5",text:"Copy newsletter emails",title:"",header:!1,exportOptions:{columns:[".esr-student-email:visible:not(.esr-hide-print)"],rows:[".esr-has-newsletter"],customizeData:function(t){var a=[],n=[];e.each(t.body,(function(t,s){-1===e.inArray(s[0],n)&&(a.push(s),n.push(s[0]))})),t.body=a}}}),e(a).hasClass("esr-copy-table")&&n.buttons.push({extend:"copyHtml5",text:"Copy Table",title:"",exportOptions:{columns:[":visible:not(.esr-hide-print)"],format:{header:function(t,a,n,s){return e(n).data("label")}}}}),e(a).hasClass("esr-excel-export")&&n.buttons.push({extend:"excel",text:"Excel",title:"",exportOptions:{columns:[":visible:not(.esr-hide-print)"],format:{header:function(t,a,n,s){return e(n).data("label")}}}}),e(a).hasClass("esr-enable-scroll")&&(n.scrollX=!0,n.scrollCollapse=!0,n.fixedColumns=!0,n.columnDefs.push({width:"20%",targets:0})),"undefined"!==e(a).data("idisplaylengt")&&(n.iDisplayLength=e(a).data("idisplaylengt"));var s=e(a).DataTable(n);e(a).hasClass("esr-enable-scroll")&&s.columns.adjust().draw(),e("[data-cin-student-id]").length>0&&jQuery(".dataTables_filter input[type=search]").val(e("[data-cin-student-id]").data("cin-student-id")).trigger("keyup")})):e(".esr-datatable.esr-all-false").length&&e(".esr-datatable.esr-all-false").DataTable({bFilter:!1,bInfo:!1,bPaginate:!1,bLength:!1,bSort:!1})}))}));