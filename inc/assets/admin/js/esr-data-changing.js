!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=8)}({8:function(t,e){jQuery((function(t){function e(t){t.find("input:not([type=submit])").val(""),t.find("textarea").val(""),t.find("select").val(null)}function a(){t("body").append('<div id="esr-waiting"></div>');var e=document.getElementById("esr-waiting");new Spinner({lines:13,length:28,width:14,radius:42,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"}).spin(e)}function r(){t("#esr-waiting").remove()}t(document).on("click",".esr-edit-box .close",(function(){var a=t(".esr-edit-box");e(a),a.hide()})).on("click",".esr-actions-box.esr-registrations-actions .esr-action.edit",(function(){var a;e(a=t(".esr-edit-box")),a.show();let r=t(this).closest(".esr-actions-box");!function(e){var a=t(".esr-edit-box");a.find("[name=student_email]").val(e.data("student-email")),a.find("[name=course_id]").val(parseInt(e.data("course-id"))),a.find("[name=dancing_as]").val(parseInt(e.data("dancing-as"))),a.find("[name=dancing_with]").val(e.data("dancing-with")),a.find("[name=partner_email]").val(e.data("partner-email")),a.find("[name=registration_id]").val(e.data("id"))}(t(`.esr-row[data-id=${r.data("id")}]`)),t("html, body").animate({scrollTop:t("#esr-edit-box").offset().top-25},2e3)})),t("body").on("click","[name=esr_registration_edit_submit]",(function(a){a.preventDefault();var r=t(".esr-edit-box");t(".esr-error",r).remove();var n={action:"esr_edit_registration",registration_id:r.find("[name=registration_id]").val(),student_email:r.find("[name=student_email]").val(),course_id:r.find("[name=course_id]").val(),dancing_as:r.find("[name=dancing_as]").val(),dancing_with:r.find("[name=dancing_with]").val(),partner_email:r.find("[name=partner_email]").val()};t.post(ajaxurl,n,(function(a){if("-1"!==a){var n=jQuery.parseJSON(a);if(n.hasOwnProperty("error"))n.error.hasOwnProperty("student")?t(".esr-student td").append("<span class='esr-error'>"+n.error.student+"</span>"):n.error.hasOwnProperty("partner")&&t(".esr-registered-partner td").append("<span class='esr-error'>"+n.error.partner+"</span>");else{var s=t(".esr-row[data-id="+r.find("[name=registration_id]").val()+"]");e(r),r.hide(),n.hasOwnProperty("student")&&(n.student.hasOwnProperty("name")&&s.find(".student-name:not(.first-name):not(.last-name)").html(n.student.name),n.student.hasOwnProperty("first_name")&&s.find(".student-name.first-name").html(n.student.first_name),n.student.hasOwnProperty("last_name")&&s.find(".student-name.last-name").html(n.student.last_name),n.student.hasOwnProperty("email")&&(s.data("student-email",n.student.email),s.find(".student-email").html(n.student.email))),n.hasOwnProperty("dancing_as")&&(n.dancing_as.hasOwnProperty("id")&&s.data("dancing-as",n.dancing_as.id),n.dancing_as.hasOwnProperty("text")&&s.find(".dancing-as").html(n.dancing_as.text)),n.hasOwnProperty("partner")&&(n.partner.hasOwnProperty("name")&&s.find(".partner-name").html(n.partner.name),n.partner.hasOwnProperty("email")&&s.data("partner-email",n.partner.email)),n.hasOwnProperty("dancing_with")&&n.dancing_with.hasOwnProperty("email")&&(s.find(".dancing-with").html(n.dancing_with.email),s.data("dancing-with",n.dancing_with.email)),n.hasOwnProperty("course")&&s.data("course-id",n.course.id).find(".course").html(n.course.id+" - "+n.course.title+" ("+n.course.day_title+")"),n.hasOwnProperty("confirm_registrations")&&(n.confirm_registrations.hasOwnProperty("student")&&s.removeClass("status-1").removeClass("status-3").addClass("status-2").find(".status").text(a.status_title),n.confirm_registrations.hasOwnProperty("partner")&&t(".esr-row[data-id="+n.confirm_registrations.partner.reg_id+"]").removeClass("status-1").removeClass("status-3").addClass("status-2").find(".status").text(a.status_title))}}}))})).on("click",".esr-actions-box.esr-registrations-actions .esr-action.remove",(function(){a();let e=t(this).closest(".esr-actions-box"),n=t(`.esr-row[data-id=${e.data("id")}]`);var s={action:"esr_remove_user_course_registration",registration_id:n.data("id")};t.post(ajaxurl,s,(function(e){if("-1"!==e&&(n.removeClass("status-1").removeClass("status-2").addClass("status-3").find(".status").text(e.status_title),n.find("td.dancing-with").empty(),n.find("td.partner-name").empty(),Number.parseInt(e.partner_registration)>0)){var a=t("tr[data-id='"+e.partner_registration+"']");a.find("td.dancing-with").empty(),a.find("td.partner-name").empty()}r()}))})).on("click",".esr-actions-box.esr-registrations-actions .esr-action.remove-forever",(function(){let e=t(this).closest(".esr-actions-box"),a=t(`.esr-row[data-id=${e.data("id")}]`);var r={action:"esr_remove_registration_forever",registration_id:a.data("id")};t.post(ajaxurl,r,(function(t){"-1"!==t&&a.remove()}))})).on("click",".esr-actions-box.esr-registrations-actions .esr-action.update-free-registration",(function(){t(this);let e=t(this).closest(".esr-actions-box"),a=t(`.esr-row[data-id=${e.data("id")}]`);if(a.hasClass("free-registration-status-0")){let e={action:"esr_set_free_registration",registration_id:a.data("id")};t.post(ajaxurl,e,(function(e){a.removeClass("free-registration-status-0").addClass("free-registration-status-"+e.free_registration),t.notify({message:e.message},{type:e.type})}))}else if(a.hasClass("free-registration-status-1")){let e={action:"esr_set_paid_registration",registration_id:a.data("id")};t.post(ajaxurl,e,(function(e){a.removeClass("free-registration-status-1").addClass("free-registration-status-"+e.free_registration),t.notify({message:e.message},{type:e.type})}))}})).on("click",".esr-actions-box.esr-registrations-actions .esr-action.confirm",(function(){a();let e=t(this).closest(".esr-actions-box"),n=t(`.esr-row[data-id=${e.data("id")}]`);var s={action:"esr_add_user_course_registration",esr_registration_id:n.data("id")};t.post(ajaxurl,s,(function(t){"-1"!==t&&n.removeClass("status-1").removeClass("status-3").addClass("status-2").find(".status").text(t.status_title),r()}))}))}))}});