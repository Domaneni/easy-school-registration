jQuery((function(t){t(document).ready((function(){t("body").on("click",".actions.esr-student .esr-action.show",(function(e){e.preventDefault();var s={action:"esr_load_student_data",student_id:t(this).closest("ul").data("id")};t.post(ajaxurl,s,(function(e){var s=jQuery.parseJSON(e);s&&(t.each(s.data,(function(e,s){t(`td.esr-user-${e}`).empty().text(s)})),t("td.esr-user-note textarea").data("user_id",s.user_id).empty().val(s.note),t("td.esr-user-registrations tbody").empty(),t.each(s.registrations,(function(e,n){const{status:a,wave_name:r,course_name:d}=n;t("td.esr-user-registrations tbody").append(`<tr class="esr-row status-${a}"><td>${s.registration_status[a].title}</td><td>${r}</td><td>${d}</td></tr>`)})),t("td.esr-user-payments tbody").empty(),t.each(s.payments,(function(e,n){const{status:a,wave_name:r,to_pay:d,payment:i}=n;t("td.esr-user-payments tbody").append(`<tr class="esr-row status-${a}"><td>${r}</td><td>${s.payment_status[a].title}</td><td>${d}</td><td>${null!==i?i:0}</td></tr>`)})))}))})).on("click",".actions.esr-student .esr-action.download",(function(e){if(e.preventDefault(),confirm("Do you want to sent user data export for this student?")){var s={action:"esr_send_student_export",student_id:t(this).closest("ul").data("id")};t.post(ajaxurl,s,(function(e){t.notify({message:e.message},{type:e.type})}))}})).on("click","button[name=esr_save_student_note]",(function(){var e=t(this).parent(),s=e.find("textarea"),n=s.val();if(""!==n){e.find(".esr_save_spinner").css("display","inline-block");var a={action:"esr_save_student_note",user_id:s.data("user_id"),note:n};t.post(ajaxurl,a,(function(t){e.find(".esr_save_spinner").hide(),e.find(".esr_save_confirmed").css("display","inline-block"),setTimeout((function(){e.find(".esr_save_confirmed").hide()}),3e3)}))}}))}))}));