!function(b,a){"object"==typeof module&&module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):b.Spinner=a()}(this,function(){"use strict";var e,f,j=["webkit","Moz","ms","O"],k={};function c(d,b){var a,c=document.createElement(d||"div");for(a in b)c[a]=b[a];return c}function g(b){for(var a=1,c=arguments.length;a<c;a++)b.appendChild(arguments[a]);return b}function l(a,d,g,h){var b=["opacity",d,~~(100*a),g,h].join("-"),c=.01+g/h*100,i=Math.max(1-(1-a)/d*(100-c),a),j=e.substring(0,e.indexOf("Animation")).toLowerCase();return k[b]||(f.insertRule("@"+(j&&"-"+j+"-"||"")+"keyframes "+b+"{0%{opacity:"+i+"}"+c+"%{opacity:"+a+"}"+(c+.01)+"%{opacity:1}"+(c+d)%100+"%{opacity:"+a+"}100%{opacity:"+i+"}}",f.cssRules.length),k[b]=1),b}function d(e,a){var c,b,d=e.style;if(void 0!==d[a=a.charAt(0).toUpperCase()+a.slice(1)])return a;for(b=0;b<j.length;b++)if(void 0!==d[c=j[b]+a])return c}function h(a,c){for(var b in c)a.style[d(a,b)||b]=c[b];return a}function i(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var c in d)void 0===a[c]&&(a[c]=d[c])}return a}function m(a,b){return"string"==typeof a?a:a[b%a.length]}var n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};function a(b){this.opts=i(b||{},a.defaults,n)}if(a.defaults={},i(a.prototype,{spin:function(f){this.stop();var b=this,a=b.opts,d=b.el=c(null,{className:a.className});if(h(d,{position:a.position,width:0,zIndex:a.zIndex,left:a.left,top:a.top}),f&&f.insertBefore(d,f.firstChild||null),d.setAttribute("role","progressbar"),b.lines(d,b.opts),!e){var j,k=0,l=(a.lines-1)*(1-a.direction)/2,i=a.fps,g=i/a.speed,m=(1-a.opacity)/(g*a.trail/100),n=g/a.lines;!function e(){k++;for(var c=0;c<a.lines;c++)j=Math.max(1-(k+(a.lines-c)*n)%g*m,a.opacity),b.opacity(d,c*a.direction+l,j,a);b.timeout=b.el&&setTimeout(e,~~(1e3/i))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(f,a){var d,b=0,j=(a.lines-1)*(1-a.direction)/2;function i(d,e){return h(c(),{position:"absolute",width:a.scale*(a.length+a.width)+"px",height:a.scale*a.width+"px",background:d,boxShadow:e,transformOrigin:"left",transform:"rotate("+ ~~(360/a.lines*b+a.rotate)+"deg) translate("+a.scale*a.radius+"px,0)",borderRadius:(a.corners*a.scale*a.width>>1)+"px"})}for(;b<a.lines;b++)d=h(c(),{position:"absolute",top:1+ ~(a.scale*a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:e&&l(a.opacity,a.trail,j+b*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&g(d,h(i("#000","0 0 4px #000"),{top:"2px"})),g(f,g(d,i(m(a.color,b),"0 0 1px rgba(0,0,0,.1)")));return f},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),"undefined"!=typeof document){f=(o=c("style",{type:"text/css"}),g(document.getElementsByTagName("head")[0],o),o.sheet||o.styleSheet);var o,b=h(c("group"),{behavior:"url(#default#VML)"});!d(b,"transform")&&b.adj?function(){function b(a,b){return c("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}f.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(f,a){var i=a.scale*(a.length+a.width),l=2*a.scale*i;function j(){return h(b("group",{coordsize:l+" "+l,coordorigin:-i+" "+ -i}),{width:l,height:l})}var c,d=-(a.width+a.length)*a.scale*2+"px",k=h(j(),{position:"absolute",top:d,left:d});function e(c,d,e){g(k,g(h(j(),{rotation:360/a.lines*c+"deg",left:~~d}),g(h(b("roundrect",{arcsize:a.corners}),{width:i,height:a.scale*a.width,left:a.scale*a.radius,top:-a.scale*a.width>>1,filter:e}),b("fill",{color:m(a.color,c),opacity:a.opacity}),b("stroke",{opacity:0}))))}if(a.shadow)for(c=1;c<=a.lines;c++)e(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(c=1;c<=a.lines;c++)e(c);return g(f,k)},a.prototype.opacity=function(d,c,e,b){var a=d.firstChild;b=b.shadow&&b.lines||0,a&&c+b<a.childNodes.length&&(a=(a=(a=a.childNodes[c+b])&&a.firstChild)&&a.firstChild)&&(a.opacity=e)}}():e=d(b,"animation")}return a})